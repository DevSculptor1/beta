<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OG Toolkit Pro Max - Ultimate Web Extraction Suite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            --ai-processing: 0%;
            --download-speed: 0%;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9fafb;
        }
        
        .ai-processing-bar::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            height: 3px;
            width: var(--ai-processing);
            background: var(--primary-gradient);
            transition: width 0.5s ease;
        }
        
        .download-progress::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            height: 3px;
            width: var(--download-speed);
            background: var(--primary-gradient);
            transition: width 0.3s ease;
        }
        
        .glow-card {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.1);
            transition: all 0.3s ease;
        }
        
        .glow-card:hover {
            box-shadow: 0 0 30px rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }
        
        .video-thumbnail, .image-thumbnail {
            transition: all 0.3s ease;
            background-size: cover;
            background-position: center;
        }
        
        .video-thumbnail:hover, .image-thumbnail:hover {
            transform: scale(1.03);
        }
        
        @keyframes ai-pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        
        .ai-pulse {
            animation: ai-pulse 1.5s infinite;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        .animate-fade-out {
            animation: fadeOut 0.3s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeOut {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(10px); }
        }
        
        .dark .dark\:bg-dark-900 {
            background-color: #0f172a;
        }
        
        .dark .dark\:bg-dark-800 {
            background-color: #1e293b;
        }
        
        .tab-active {
            border-bottom: 3px solid #6366f1;
            color: #6366f1;
            font-weight: 600;
        }
        
        .dark .tab-active {
            border-bottom-color: #8b5cf6;
            color: #8b5cf6;
        }
        
        .tech-tag {
            position: relative;
            overflow: hidden;
        }
        
        .tech-tag::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.7), transparent);
            transform: translateX(-100%);
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            100% {
                transform: translateX(100%);
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-dark-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Animated Background -->
    <div class="fixed inset-0 -z-10 opacity-10 dark:opacity-5">
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')]"></div>
    </div>

    <!-- Header -->
    <header class="bg-white dark:bg-dark-800 shadow-sm sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-3">
                    <div class="bg-indigo-500 text-white p-2 rounded-lg">
                        <i class="fas fa-box-open text-xl"></i>
                    </div>
                    <h1 class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-500 bg-clip-text text-transparent">
                        OG Toolkit Pro Max
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition">
                        <i class="fas fa-crown mr-2"></i> Upgrade
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h2 class="text-3xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-indigo-600 to-purple-500 bg-clip-text text-transparent">
                Ultimate Web Extraction Suite
            </h2>
            <p class="text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto">
                Extract <span class="font-medium text-indigo-600 dark:text-indigo-400">videos, images, metadata</span> and detect website technologies with AI-powered analysis
            </p>
        </div>

        <!-- Tabs -->
        <div class="flex border-b border-gray-200 dark:border-gray-700 mb-8">
            <button class="tab-btn px-4 py-2 font-medium text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition mr-2" data-tab="video-extractor">
                <i class="fas fa-film mr-2"></i> Video Extractor
            </button>
            <button class="tab-btn px-4 py-2 font-medium text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition mr-2" data-tab="image-extractor">
                <i class="fas fa-image mr-2"></i> Image Extractor
            </button>
            <button class="tab-btn px-4 py-2 font-medium text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition mr-2" data-tab="website-analyzer">
                <i class="fas fa-globe mr-2"></i> Website Analyzer
            </button>
            <button class="tab-btn px-4 py-2 font-medium text-gray-500 dark:text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400 transition" data-tab="metadata-extractor">
                <i class="fas fa-tags mr-2"></i> Metadata
            </button>
        </div>

        <!-- Video Extractor Tab -->
        <div id="video-extractor" class="tab-content active">
            <!-- Input Card -->
            <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flex-1">
                        <label for="url-input" class="block text-sm font-medium mb-2">
                            <i class="fas fa-link mr-2 text-indigo-500"></i> Enter Website URL
                        </label>
                        <div class="relative">
                            <input 
                                type="url" 
                                id="url-input" 
                                placeholder="https://example.com" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition text-sm dark:bg-dark-900 pr-12"
                            >
                            <button 
                                id="analyze-btn"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-xs font-medium transition flex items-center"
                            >
                                <i class="fas fa-search mr-1"></i> Analyze
                            </button>
                        </div>
                    </div>
                    <div>
                        <button 
                            id="extract-btn" 
                            class="w-full md:w-auto px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition flex items-center justify-center font-medium shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-bolt mr-2"></i> Extract Videos
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 flex flex-wrap gap-2">
                    <div class="px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> YouTube Supported
                    </div>
                    <div class="px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Vimeo Supported
                    </div>
                    <div class="px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> MP4/WebM Detection
                    </div>
                    <div class="px-3 py-1 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Embedded Videos
                    </div>
                </div>
            </div>

            <!-- AI Processing Section -->
            <div id="ai-processing" class="hidden bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-full text-indigo-600 dark:text-indigo-400">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">AI Video Detection in Progress</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Analyzing page structure and content</p>
                    </div>
                </div>
                <div class="w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative ai-processing-bar">
                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out" style="width: 0%"></div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-gray-500 dark:text-gray-400">
                    <span>Initializing</span>
                    <span id="ai-status">Scanning page elements</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="results-section" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold flex items-center">
                        <i class="fas fa-film text-indigo-500 mr-2"></i> Extracted Videos
                        <span id="result-count" class="ml-2 text-sm bg-indigo-100 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-200 px-2.5 py-0.5 rounded-full"></span>
                    </h3>
                    <div class="flex space-x-2">
                        <button 
                            id="copy-all-btn" 
                            class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition flex items-center text-sm"
                        >
                            <i class="fas fa-copy mr-2"></i> Copy All
                        </button>
                        <button 
                            id="export-btn" 
                            class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition flex items-center text-sm shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-file-export mr-2"></i> Export JSON
                        </button>
                    </div>
                </div>

                <div id="results-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    <!-- Results will be inserted here -->
                </div>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="text-center py-16">
                <div class="max-w-md mx-auto">
                    <div class="relative w-24 h-24 mx-auto mb-6">
                        <div class="absolute inset-0 bg-indigo-100 dark:bg-indigo-900/20 rounded-full animate-pulse"></div>
                        <div class="absolute inset-4 bg-indigo-200 dark:bg-indigo-800/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-play-circle text-3xl text-indigo-500"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-medium mb-2">Ready to Extract Videos</h3>
                    <p class="text-gray-500 dark:text-gray-400 mb-6">Enter a website URL above to discover all embedded videos</p>
                    <div class="flex justify-center space-x-3">
                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg flex items-center text-sm">
                            <i class="fas fa-question-circle mr-2"></i> Guide
                        </button>
                        <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center text-sm">
                            <i class="fas fa-bolt mr-2"></i> Quick Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Image Extractor Tab -->
        <div id="image-extractor" class="tab-content hidden">
            <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flex-1">
                        <label for="image-url-input" class="block text-sm font-medium mb-2">
                            <i class="fas fa-link mr-2 text-indigo-500"></i> Enter Website URL
                        </label>
                        <div class="relative">
                            <input 
                                type="url" 
                                id="image-url-input" 
                                placeholder="https://example.com" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition text-sm dark:bg-dark-900 pr-12"
                            >
                            <button 
                                id="analyze-images-btn"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-xs font-medium transition flex items-center"
                            >
                                <i class="fas fa-search mr-1"></i> Analyze
                            </button>
                        </div>
                    </div>
                    <div>
                        <button 
                            id="extract-images-btn" 
                            class="w-full md:w-auto px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition flex items-center justify-center font-medium shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-bolt mr-2"></i> Extract Images
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 flex flex-wrap gap-2">
                    <div class="px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> JPG/PNG Detection
                    </div>
                    <div class="px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> WebP/SVG Support
                    </div>
                    <div class="px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Background Images
                    </div>
                    <div class="px-3 py-1 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Lazy-loaded Images
                    </div>
                </div>
            </div>

            <!-- AI Processing Section -->
            <div id="image-ai-processing" class="hidden bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-full text-indigo-600 dark:text-indigo-400">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">AI Image Detection in Progress</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Analyzing page structure and content</p>
                    </div>
                </div>
                <div class="w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative ai-processing-bar">
                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out" style="width: 0%"></div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-gray-500 dark:text-gray-400">
                    <span>Initializing</span>
                    <span id="image-ai-status">Scanning page elements</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="image-results-section" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold flex items-center">
                        <i class="fas fa-image text-indigo-500 mr-2"></i> Extracted Images
                        <span id="image-result-count" class="ml-2 text-sm bg-indigo-100 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-200 px-2.5 py-0.5 rounded-full"></span>
                    </h3>
                    <div class="flex space-x-2">
                        <button 
                            id="copy-all-images-btn" 
                            class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition flex items-center text-sm"
                        >
                            <i class="fas fa-copy mr-2"></i> Copy All
                        </button>
                        <button 
                            id="export-images-btn" 
                            class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition flex items-center text-sm shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-file-export mr-2"></i> Export JSON
                        </button>
                        <div class="relative">
                            <button 
                                id="download-all-images-btn" 
                                class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition flex items-center text-sm"
                            >
                                <i class="fas fa-download mr-2"></i> Download All
                            </button>
                            <div class="absolute -top-2 -right-2 bg-indigo-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden" id="download-all-count">0</div>
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <div class="flex items-center space-x-2">
                        <label for="image-size-filter" class="text-sm font-medium">Filter by Size:</label>
                        <select id="image-size-filter" class="border border-gray-300 dark:border-gray-700 rounded-md px-2 py-1 text-sm bg-white dark:bg-dark-800">
                            <option value="all">All Sizes</option>
                            <option value="small">Small (< 500px)</option>
                            <option value="medium">Medium (500-1000px)</option>
                            <option value="large">Large (> 1000px)</option>
                        </select>
                        <label for="image-type-filter" class="text-sm font-medium ml-2">Type:</label>
                        <select id="image-type-filter" class="border border-gray-300 dark:border-gray-700 rounded-md px-2 py-1 text-sm bg-white dark:bg-dark-800">
                            <option value="all">All Types</option>
                            <option value="jpg">JPG</option>
                            <option value="png">PNG</option>
                            <option value="webp">WebP</option>
                            <option value="svg">SVG</option>
                            <option value="gif">GIF</option>
                        </select>
                    </div>
                </div>

                <div id="image-results-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4">
                    <!-- Results will be inserted here -->
                </div>
            </div>

            <!-- Empty State -->
            <div id="image-empty-state" class="text-center py-16">
                <div class="max-w-md mx-auto">
                    <div class="relative w-24 h-24 mx-auto mb-6">
                        <div class="absolute inset-0 bg-indigo-100 dark:bg-indigo-900/20 rounded-full animate-pulse"></div>
                        <div class="absolute inset-4 bg-indigo-200 dark:bg-indigo-800/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-image text-3xl text-indigo-500"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-medium mb-2">Ready to Extract Images</h3>
                    <p class="text-gray-500 dark:text-gray-400 mb-6">Enter a website URL above to discover all images</p>
                    <div class="flex justify-center space-x-3">
                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg flex items-center text-sm">
                            <i class="fas fa-question-circle mr-2"></i> Guide
                        </button>
                        <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center text-sm">
                            <i class="fas fa-bolt mr-2"></i> Quick Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Website Analyzer Tab -->
        <div id="website-analyzer" class="tab-content hidden">
            <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flex-1">
                        <label for="analyzer-url-input" class="block text-sm font-medium mb-2">
                            <i class="fas fa-link mr-2 text-indigo-500"></i> Enter Website URL
                        </label>
                        <div class="relative">
                            <input 
                                type="url" 
                                id="analyzer-url-input" 
                                placeholder="https://example.com" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition text-sm dark:bg-dark-900 pr-12"
                            >
                            <button 
                                id="analyze-website-btn"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-xs font-medium transition flex items-center"
                            >
                                <i class="fas fa-search mr-1"></i> Analyze
                            </button>
                        </div>
                    </div>
                    <div>
                        <button 
                            id="deep-scan-btn" 
                            class="w-full md:w-auto px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition flex items-center justify-center font-medium shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-search-plus mr-2"></i> Deep Scan
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 flex flex-wrap gap-2">
                    <div class="px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> CMS Detection
                    </div>
                    <div class="px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Technology Stack
                    </div>
                    <div class="px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Performance Metrics
                    </div>
                    <div class="px-3 py-1 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Security Analysis
                    </div>
                </div>
            </div>

            <!-- AI Processing Section -->
            <div id="website-ai-processing" class="hidden bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-full text-indigo-600 dark:text-indigo-400">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">AI Website Analysis in Progress</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Analyzing website structure and technologies</p>
                    </div>
                </div>
                <div class="w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative ai-processing-bar">
                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out" style="width: 0%"></div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-gray-500 dark:text-gray-400">
                    <span>Initializing</span>
                    <span id="website-ai-status">Scanning website elements</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="website-results-section" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold flex items-center">
                        <i class="fas fa-globe text-indigo-500 mr-2"></i> Website Analysis Results
                    </h3>
                    <div class="flex space-x-2">
                        <button 
                            id="export-website-btn" 
                            class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition flex items-center text-sm shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-file-export mr-2"></i> Export Report
                        </button>
                    </div>
                </div>

                <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-info-circle text-indigo-500 mr-2"></i> Basic Information
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Website URL</p>
                            <p id="website-url" class="text-sm break-all font-medium"></p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Title</p>
                            <p id="website-title" class="text-sm font-medium"></p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Description</p>
                            <p id="website-description" class="text-sm font-medium"></p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Favicon</p>
                            <div id="website-favicon" class="w-6 h-6"></div>
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-cogs text-indigo-500 mr-2"></i> Technology Stack
                    </h4>
                    <div class="mb-6">
                        <div class="flex flex-wrap gap-2 mb-4" id="tech-stack-container">
                            <!-- Technology tags will be inserted here -->
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-tachometer-alt text-indigo-500 mr-2"></i> Performance Metrics
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Page Size</p>
                            <p id="page-size" class="text-sm font-medium">Analyzing...</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Load Time</p>
                            <p id="load-time" class="text-sm font-medium">Analyzing...</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Requests</p>
                            <p id="request-count" class="text-sm font-medium">Analyzing...</p>
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-shield-alt text-indigo-500 mr-2"></i> Security Analysis
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">HTTPS</p>
                            <p id="https-status" class="text-sm font-medium">Checking...</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Security Headers</p>
                            <p id="security-headers" class="text-sm font-medium">Checking...</p>
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-code text-indigo-500 mr-2"></i> CMS Detection
                    </h4>
                    <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700 mb-6">
                        <div class="flex items-center">
                            <div id="cms-logo" class="w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center mr-4">
                                <i class="fas fa-question text-gray-400"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Content Management System</p>
                                <p id="cms-detected" class="text-sm font-medium">Analyzing...</p>
                            </div>
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-server text-indigo-500 mr-2"></i> Server Information
                    </h4>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Web Server</p>
                            <p id="web-server" class="text-sm font-medium">Analyzing...</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">IP Address</p>
                            <p id="ip-address" class="text-sm font-medium">Analyzing...</p>
                        </div>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-400 mb-1">Hosting Provider</p>
                            <p id="hosting-provider" class="text-sm font-medium">Analyzing...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div id="website-empty-state" class="text-center py-16">
                <div class="max-w-md mx-auto">
                    <div class="relative w-24 h-24 mx-auto mb-6">
                        <div class="absolute inset-0 bg-indigo-100 dark:bg-indigo-900/20 rounded-full animate-pulse"></div>
                        <div class="absolute inset-4 bg-indigo-200 dark:bg-indigo-800/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-globe text-3xl text-indigo-500"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-medium mb-2">Ready to Analyze Website</h3>
                    <p class="text-gray-500 dark:text-gray-400 mb-6">Enter a website URL above to analyze its technology stack and performance</p>
                    <div class="flex justify-center space-x-3">
                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg flex items-center text-sm">
                            <i class="fas fa-question-circle mr-2"></i> Guide
                        </button>
                        <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center text-sm">
                            <i class="fas fa-bolt mr-2"></i> Quick Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Metadata Extractor Tab -->
        <div id="metadata-extractor" class="tab-content hidden">
            <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-col md:flex-row md:items-end space-y-4 md:space-y-0 md:space-x-4">
                    <div class="flex-1">
                        <label for="metadata-url-input" class="block text-sm font-medium mb-2">
                            <i class="fas fa-link mr-2 text-indigo-500"></i> Enter Website URL
                        </label>
                        <div class="relative">
                            <input 
                                type="url" 
                                id="metadata-url-input" 
                                placeholder="https://example.com" 
                                class="w-full px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition text-sm dark:bg-dark-900 pr-12"
                            >
                            <button 
                                id="analyze-metadata-btn"
                                class="absolute right-2 top-1/2 transform -translate-y-1/2 px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded-md text-xs font-medium transition flex items-center"
                            >
                                <i class="fas fa-search mr-1"></i> Analyze
                            </button>
                        </div>
                    </div>
                    <div>
                        <button 
                            id="extract-metadata-btn" 
                            class="w-full md:w-auto px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-500 hover:from-indigo-700 hover:to-purple-600 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition flex items-center justify-center font-medium shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-bolt mr-2"></i> Extract Metadata
                        </button>
                    </div>
                </div>
                
                <div class="mt-4 flex flex-wrap gap-2">
                    <div class="px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> OpenGraph
                    </div>
                    <div class="px-3 py-1 bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Twitter Cards
                    </div>
                    <div class="px-3 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> Schema.org
                    </div>
                    <div class="px-3 py-1 bg-pink-50 dark:bg-pink-900/20 text-pink-600 dark:text-pink-300 rounded-full text-xs flex items-center">
                        <i class="fas fa-check-circle mr-1"></i> JSON-LD
                    </div>
                </div>
            </div>

            <!-- AI Processing Section -->
            <div id="metadata-ai-processing" class="hidden bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                <div class="flex items-center space-x-4 mb-4">
                    <div class="p-2 bg-indigo-100 dark:bg-indigo-900/20 rounded-full text-indigo-600 dark:text-indigo-400">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div>
                        <h3 class="font-medium">AI Metadata Extraction in Progress</h3>
                        <p class="text-sm text-gray-500 dark:text-gray-400">Analyzing page metadata and structured data</p>
                    </div>
                </div>
                <div class="w-full bg-gray-100 dark:bg-gray-700 rounded-full h-2 overflow-hidden relative ai-processing-bar">
                    <div class="h-full bg-gradient-to-r from-indigo-500 to-purple-500 transition-all duration-1000 ease-out" style="width: 0%"></div>
                </div>
                <div class="mt-2 flex justify-between text-xs text-gray-500 dark:text-gray-400">
                    <span>Initializing</span>
                    <span id="metadata-ai-status">Scanning metadata elements</span>
                </div>
            </div>

            <!-- Results Section -->
            <div id="metadata-results-section" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold flex items-center">
                        <i class="fas fa-tags text-indigo-500 mr-2"></i> Extracted Metadata
                    </h3>
                    <div class="flex space-x-2">
                        <button 
                            id="copy-metadata-btn" 
                            class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg transition flex items-center text-sm"
                        >
                            <i class="fas fa-copy mr-2"></i> Copy All
                        </button>
                        <button 
                            id="export-metadata-btn" 
                            class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition flex items-center text-sm shadow-lg shadow-indigo-500/10"
                        >
                            <i class="fas fa-file-export mr-2"></i> Export JSON
                        </button>
                    </div>
                </div>

                <div class="glow-card bg-white dark:bg-dark-800 rounded-xl shadow-sm p-6 mb-8 border border-gray-200 dark:border-gray-700">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium text-lg mb-4 flex items-center">
                                <i class="fas fa-file-alt text-indigo-500 mr-2"></i> Basic Metadata
                            </h4>
                            <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700 mb-6">
                                <div class="space-y-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Title</p>
                                        <p id="meta-title" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Description</p>
                                        <p id="meta-description" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Keywords</p>
                                        <p id="meta-keywords" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Author</p>
                                        <p id="meta-author" class="text-sm font-medium">Not detected</p>
                                    </div>
                                </div>
                            </div>

                            <h4 class="font-medium text-lg mb-4 flex items-center">
                                <i class="fab fa-twitter text-indigo-500 mr-2"></i> Twitter Card
                            </h4>
                            <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700 mb-6">
                                <div class="space-y-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Card Type</p>
                                        <p id="twitter-card" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Title</p>
                                        <p id="twitter-title" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Description</p>
                                        <p id="twitter-description" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Image</p>
                                        <p id="twitter-image" class="text-sm font-medium break-all">Not detected</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h4 class="font-medium text-lg mb-4 flex items-center">
                                <i class="fab fa-facebook-f text-indigo-500 mr-2"></i> OpenGraph
                            </h4>
                            <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700 mb-6">
                                <div class="space-y-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Title</p>
                                        <p id="og-title" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Description</p>
                                        <p id="og-description" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Type</p>
                                        <p id="og-type" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Image</p>
                                        <p id="og-image" class="text-sm font-medium break-all">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">URL</p>
                                        <p id="og-url" class="text-sm font-medium break-all">Not detected</p>
                                    </div>
                                </div>
                            </div>

                            <h4 class="font-medium text-lg mb-4 flex items-center">
                                <i class="fas fa-code text-indigo-500 mr-2"></i> Structured Data
                            </h4>
                            <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700 mb-6">
                                <div class="space-y-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Schema.org Types</p>
                                        <p id="schema-types" class="text-sm font-medium">Not detected</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">JSON-LD Detected</p>
                                        <p id="json-ld-detected" class="text-sm font-medium">Not detected</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h4 class="font-medium text-lg mb-4 flex items-center">
                        <i class="fas fa-list text-indigo-500 mr-2"></i> All Metadata Tags
                    </h4>
                    <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                <thead class="bg-gray-100 dark:bg-gray-800">
                                    <tr>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Property</th>
                                        <th class="px-4 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Content</th>
                                    </tr>
                                </thead>
                                <tbody id="all-metadata-tbody" class="divide-y divide-gray-200 dark:divide-gray-700">
                                    <!-- Metadata rows will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Empty State -->
            <div id="metadata-empty-state" class="text-center py-16">
                <div class="max-w-md mx-auto">
                    <div class="relative w-24 h-24 mx-auto mb-6">
                        <div class="absolute inset-0 bg-indigo-100 dark:bg-indigo-900/20 rounded-full animate-pulse"></div>
                        <div class="absolute inset-4 bg-indigo-200 dark:bg-indigo-800/30 rounded-full flex items-center justify-center">
                            <i class="fas fa-tags text-3xl text-indigo-500"></i>
                        </div>
                    </div>
                    <h3 class="text-xl font-medium mb-2">Ready to Extract Metadata</h3>
                    <p class="text-gray-500 dark:text-gray-400 mb-6">Enter a website URL above to extract OpenGraph, Twitter Cards and other metadata</p>
                    <div class="flex justify-center space-x-3">
                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-lg flex items-center text-sm">
                            <i class="fas fa-question-circle mr-2"></i> Guide
                        </button>
                        <button class="px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center text-sm">
                            <i class="fas fa-bolt mr-2"></i> Quick Demo
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Features Section -->
        <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="glow-card bg-white dark:bg-dark-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
                <div class="w-12 h-12 bg-indigo-100 dark:bg-indigo-900/20 rounded-lg flex items-center justify-center text-indigo-600 dark:text-indigo-400 mb-4">
                    <i class="fas fa-microchip text-xl"></i>
                </div>
                <h4 class="font-medium text-lg mb-2">AI-Powered Detection</h4>
                <p class="text-gray-600 dark:text-gray-400">Our advanced algorithms detect even the most hidden content sources using machine learning patterns.</p>
            </div>
            <div class="glow-card bg-white dark:bg-dark-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
                <div class="w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center text-green-600 dark:text-green-400 mb-4">
                    <i class="fas fa-tachometer-alt text-xl"></i>
                </div>
                <h4 class="font-medium text-lg mb-2">Lightning Fast</h4>
                <p class="text-gray-600 dark:text-gray-400">Parallel processing and optimized code delivers results in seconds, not minutes.</p>
            </div>
            <div class="glow-card bg-white dark:bg-dark-800 p-6 rounded-xl border border-gray-200 dark:border-gray-700">
                <div class="w-12 h-12 bg-purple-100 dark:bg-purple-900/20 rounded-lg flex items-center justify-center text-purple-600 dark:text-purple-400 mb-4">
                    <i class="fas fa-shield-alt text-xl"></i>
                </div>
                <h4 class="font-medium text-lg mb-2">Privacy Focused</h4>
                <p class="text-gray-600 dark:text-gray-400">All processing happens in your browser. No data is sent to our servers.</p>
            </div>
        </div>
    </main>

    <!-- Preview Modal -->
    <div id="preview-modal" class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-dark-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden">
            <div class="flex justify-between items-center bg-gray-50 dark:bg-dark-900 px-6 py-4 border-b dark:border-gray-700">
                <h3 class="font-medium flex items-center">
                    <i class="fas fa-play-circle text-indigo-500 mr-2"></i> Video Preview
                </h3>
                <div class="flex items-center space-x-3">
                    <button id="download-hd-btn" class="px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-md text-sm flex items-center">
                        <i class="fas fa-download mr-1"></i> HD
                    </button>
                    <button id="close-preview" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-xl">
                        &times;
                    </button>
                </div>
            </div>
            
            <div class="flex-1 overflow-auto">
                <div id="video-preview-container" class="w-full bg-black">
                    <div class="aspect-video flex items-center justify-center text-white">
                        <i class="fas fa-spinner fa-spin text-2xl"></i>
                    </div>
                </div>
                
                <div class="p-6">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="md:col-span-2">
                            <h4 class="font-medium mb-2">Video Information</h4>
                            <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                                <div class="space-y-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Source URL</p>
                                        <p id="video-url" class="text-sm break-all"></p>
                                    </div>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Type</p>
                                            <p id="video-type" class="text-sm"></p>
                                        </div>
                                        <div>
                                            <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Quality</p>
                                            <p id="video-quality" class="text-sm">Auto-detecting...</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h4 class="font-medium mb-2">Quick Actions</h4>
                            <div class="space-y-2">
                                <button id="copy-url-btn" class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg flex items-center justify-between">
                                    <span>Copy URL</span>
                                    <i class="fas fa-copy"></i>
                                </button>
                                <button id="download-btn" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center justify-between download-progress">
                                    <span>Download</span>
                                    <i class="fas fa-download"></i>
                                </button>
                                <button id="analyze-btn" class="w-full px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg flex items-center justify-between">
                                    <span>Analyze Quality</span>
                                    <i class="fas fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="image-preview-modal" class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-dark-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col overflow-hidden">
            <div class="flex justify-between items-center bg-gray-50 dark:bg-dark-900 px-6 py-4 border-b dark:border-gray-700">
                <h3 class="font-medium flex items-center">
                    <i class="fas fa-image text-indigo-500 mr-2"></i> Image Preview
                </h3>
                <div class="flex items-center space-x-3">
                    <button id="download-original-btn" class="px-3 py-1 bg-green-100 dark:bg-green-900/20 text-green-600 dark:text-green-300 rounded-md text-sm flex items-center">
                        <i class="fas fa-download mr-1"></i> Original
                    </button>
                    <button id="close-image-preview" class="text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 text-xl">
                        &times;
                    </button>
                </div>
            </div>
            
            <div class="flex-1 overflow-auto flex items-center justify-center p-4">
                <div id="image-preview-container" class="max-w-full max-h-[70vh]">
                    <img id="previewed-image" src="" alt="Preview" class="max-w-full max-h-[70vh] object-contain rounded-lg">
                </div>
            </div>
            
            <div class="p-6 border-t dark:border-gray-700">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="md:col-span-2">
                        <h4 class="font-medium mb-2">Image Information</h4>
                        <div class="bg-gray-50 dark:bg-dark-900 rounded-lg p-4 border dark:border-gray-700">
                            <div class="space-y-3">
                                <div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Source URL</p>
                                    <p id="image-url" class="text-sm break-all"></p>
                                </div>
                                <div class="grid grid-cols-3 gap-3">
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Type</p>
                                        <p id="image-type" class="text-sm"></p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Dimensions</p>
                                        <p id="image-dimensions" class="text-sm">Loading...</p>
                                    </div>
                                    <div>
                                        <p class="text-xs text-gray-500 dark:text-gray-400 mb-1">Size</p>
                                        <p id="image-size" class="text-sm">Loading...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="font-medium mb-2">Quick Actions</h4>
                        <div class="space-y-2">
                            <button id="copy-image-url-btn" class="w-full px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg flex items-center justify-between">
                                <span>Copy URL</span>
                                <i class="fas fa-copy"></i>
                            </button>
                            <button id="download-image-btn" class="w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg flex items-center justify-between download-progress">
                                <span>Download</span>
                                <i class="fas fa-download"></i>
                            </button>
                            <button id="open-image-btn" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg flex items-center justify-between">
                                <span>Open in New Tab</span>
                                <i class="fas fa-external-link-alt"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-white dark:bg-dark-800 border-t dark:border-gray-700 mt-16">
        <div class="container mx-auto px-4 py-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <div class="bg-indigo-500 text-white p-2 rounded-lg">
                            <i class="fas fa-box-open"></i>
                        </div>
                        <h4 class="font-bold">OG Toolkit</h4>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400">The most advanced web extraction technology in your browser.</p>
                </div>
                <div>
                    <h5 class="font-medium mb-3">Product</h5>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Features</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Pricing</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">API</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-medium mb-3">Resources</h5>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Documentation</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Tutorials</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h5 class="font-medium mb-3">Company</h5>
                    <ul class="space-y-2 text-sm text-gray-600 dark:text-gray-400">
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">About</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Privacy</a></li>
                        <li><a href="#" class="hover:text-indigo-600 dark:hover:text-indigo-400 transition">Terms</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t dark:border-gray-700 mt-8 pt-8 text-center text-sm text-gray-500 dark:text-gray-400">
                &copy; 2023 OG Toolkit Pro Max. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const elements = {
                // Video Extractor
                urlInput: document.getElementById('url-input'),
                extractBtn: document.getElementById('extract-btn'),
                analyzeBtn: document.getElementById('analyze-btn'),
                resultsContainer: document.getElementById('results-container'),
                resultsSection: document.getElementById('results-section'),
                emptyState: document.getElementById('empty-state'),
                aiProcessing: document.getElementById('ai-processing'),
                aiStatus: document.getElementById('ai-status'),
                copyAllBtn: document.getElementById('copy-all-btn'),
                exportBtn: document.getElementById('export-btn'),
                resultCount: document.getElementById('result-count'),
                
                // Image Extractor
                imageUrlInput: document.getElementById('image-url-input'),
                extractImagesBtn: document.getElementById('extract-images-btn'),
                analyzeImagesBtn: document.getElementById('analyze-images-btn'),
                imageResultsContainer: document.getElementById('image-results-container'),
                imageResultsSection: document.getElementById('image-results-section'),
                imageEmptyState: document.getElementById('image-empty-state'),
                imageAiProcessing: document.getElementById('image-ai-processing'),
                imageAiStatus: document.getElementById('image-ai-status'),
                copyAllImagesBtn: document.getElementById('copy-all-images-btn'),
                exportImagesBtn: document.getElementById('export-images-btn'),
                downloadAllImagesBtn: document.getElementById('download-all-images-btn'),
                downloadAllCount: document.getElementById('download-all-count'),
                imageResultCount: document.getElementById('image-result-count'),
                imageSizeFilter: document.getElementById('image-size-filter'),
                imageTypeFilter: document.getElementById('image-type-filter'),
                
                // Website Analyzer
                analyzerUrlInput: document.getElementById('analyzer-url-input'),
                analyzeWebsiteBtn: document.getElementById('analyze-website-btn'),
                deepScanBtn: document.getElementById('deep-scan-btn'),
                websiteResultsSection: document.getElementById('website-results-section'),
                websiteEmptyState: document.getElementById('website-empty-state'),
                websiteAiProcessing: document.getElementById('website-ai-processing'),
                websiteAiStatus: document.getElementById('website-ai-status'),
                exportWebsiteBtn: document.getElementById('export-website-btn'),
                
                // Metadata Extractor
                metadataUrlInput: document.getElementById('metadata-url-input'),
                analyzeMetadataBtn: document.getElementById('analyze-metadata-btn'),
                extractMetadataBtn: document.getElementById('extract-metadata-btn'),
                metadataResultsSection: document.getElementById('metadata-results-section'),
                metadataEmptyState: document.getElementById('metadata-empty-state'),
                metadataAiProcessing: document.getElementById('metadata-ai-processing'),
                metadataAiStatus: document.getElementById('metadata-ai-status'),
                copyMetadataBtn: document.getElementById('copy-metadata-btn'),
                exportMetadataBtn: document.getElementById('export-metadata-btn'),
                
                // Preview Modals
                previewModal: document.getElementById('preview-modal'),
                closePreviewBtn: document.getElementById('close-preview'),
                videoPreviewContainer: document.getElementById('video-preview-container'),
                videoUrlElement: document.getElementById('video-url'),
                videoTypeElement: document.getElementById('video-type'),
                videoQualityElement: document.getElementById('video-quality'),
                copyUrlBtn: document.getElementById('copy-url-btn'),
                downloadBtn: document.getElementById('download-btn'),
                downloadHdBtn: document.getElementById('download-hd-btn'),
                analyzeQualityBtn: document.getElementById('analyze-btn'),
                
                imagePreviewModal: document.getElementById('image-preview-modal'),
                closeImagePreviewBtn: document.getElementById('close-image-preview'),
                imagePreviewContainer: document.getElementById('image-preview-container'),
                previewedImage: document.getElementById('previewed-image'),
                imageUrlElement: document.getElementById('image-url'),
                imageTypeElement: document.getElementById('image-type'),
                imageDimensionsElement: document.getElementById('image-dimensions'),
                imageSizeElement: document.getElementById('image-size'),
                copyImageUrlBtn: document.getElementById('copy-image-url-btn'),
                downloadImageBtn: document.getElementById('download-image-btn'),
                downloadOriginalBtn: document.getElementById('download-original-btn'),
                openImageBtn: document.getElementById('open-image-btn'),
                
                // Theme
                themeToggle: document.getElementById('theme-toggle'),
                
                // Website Analysis Results
                websiteUrl: document.getElementById('website-url'),
                websiteTitle: document.getElementById('website-title'),
                websiteDescription: document.getElementById('website-description'),
                websiteFavicon: document.getElementById('website-favicon'),
                techStackContainer: document.getElementById('tech-stack-container'),
                pageSize: document.getElementById('page-size'),
                loadTime: document.getElementById('load-time'),
                requestCount: document.getElementById('request-count'),
                httpsStatus: document.getElementById('https-status'),
                securityHeaders: document.getElementById('security-headers'),
                cmsLogo: document.getElementById('cms-logo'),
                cmsDetected: document.getElementById('cms-detected'),
                webServer: document.getElementById('web-server'),
                ipAddress: document.getElementById('ip-address'),
                hostingProvider: document.getElementById('hosting-provider'),
                
                // Metadata Results
                metaTitle: document.getElementById('meta-title'),
                metaDescription: document.getElementById('meta-description'),
                metaKeywords: document.getElementById('meta-keywords'),
                metaAuthor: document.getElementById('meta-author'),
                twitterCard: document.getElementById('twitter-card'),
                twitterTitle: document.getElementById('twitter-title'),
                twitterDescription: document.getElementById('twitter-description'),
                twitterImage: document.getElementById('twitter-image'),
                ogTitle: document.getElementById('og-title'),
                ogDescription: document.getElementById('og-description'),
                ogType: document.getElementById('og-type'),
                ogImage: document.getElementById('og-image'),
                ogUrl: document.getElementById('og-url'),
                schemaTypes: document.getElementById('schema-types'),
                jsonLdDetected: document.getElementById('json-ld-detected'),
                allMetadataTbody: document.getElementById('all-metadata-tbody'),
                
                // Tabs
                tabBtns: document.querySelectorAll('.tab-btn'),
                tabContents: document.querySelectorAll('.tab-content')
            };
            
            // Global variables
            let currentPreviewUrl = '';
            let currentPreviewImageUrl = '';
            let extractedVideos = [];
            let extractedImages = [];
            let downloadController = null;
            let aiProgressInterval = null;
            let selectedImagesForDownload = [];
            
            // Initialize theme and tabs
            initTheme();
            initTabs();
            
            // Event Listeners
            // Video Extractor
            elements.extractBtn.addEventListener('click', extractVideos);
            elements.analyzeBtn.addEventListener('click', analyzePage);
            elements.urlInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzePage();
            });
            elements.copyAllBtn.addEventListener('click', copyAllUrls);
            elements.exportBtn.addEventListener('click', exportVideos);
            
            // Image Extractor
            elements.extractImagesBtn.addEventListener('click', extractImages);
            elements.analyzeImagesBtn.addEventListener('click', analyzeImages);
            elements.imageUrlInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeImages();
            });
            elements.copyAllImagesBtn.addEventListener('click', copyAllImageUrls);
            elements.exportImagesBtn.addEventListener('click', exportImages);
            elements.downloadAllImagesBtn.addEventListener('click', downloadSelectedImages);
            elements.imageSizeFilter.addEventListener('change', filterImages);
            elements.imageTypeFilter.addEventListener('change', filterImages);
            
            // Website Analyzer
            elements.analyzeWebsiteBtn.addEventListener('click', analyzeWebsite);
            elements.deepScanBtn.addEventListener('click', deepScanWebsite);
            elements.analyzerUrlInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeWebsite();
            });
            elements.exportWebsiteBtn.addEventListener('click', exportWebsiteReport);
            
            // Metadata Extractor
            elements.analyzeMetadataBtn.addEventListener('click', analyzeMetadata);
            elements.extractMetadataBtn.addEventListener('click', extractMetadata);
            elements.metadataUrlInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') analyzeMetadata();
            });
            elements.copyMetadataBtn.addEventListener('click', copyAllMetadata);
            elements.exportMetadataBtn.addEventListener('click', exportMetadata);
            
            // Preview Modals
            elements.closePreviewBtn.addEventListener('click', closePreview);
            elements.copyUrlBtn.addEventListener('click', copyCurrentUrl);
            elements.downloadBtn.addEventListener('click', () => downloadVideo(currentPreviewUrl));
            elements.downloadHdBtn.addEventListener('click', downloadHdVersion);
            elements.analyzeQualityBtn.addEventListener('click', analyzeVideoQuality);
            
            elements.closeImagePreviewBtn.addEventListener('click', closeImagePreview);
            elements.copyImageUrlBtn.addEventListener('click', copyCurrentImageUrl);
            elements.downloadImageBtn.addEventListener('click', () => downloadImage(currentPreviewImageUrl));
            elements.downloadOriginalBtn.addEventListener('click', () => downloadImage(currentPreviewImageUrl, true));
            elements.openImageBtn.addEventListener('click', openImageInNewTab);
            
            // Theme
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // Helper Functions
            function initTheme() {
                if (localStorage.getItem('theme') === 'dark' || 
                    (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
            
            function toggleTheme() {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('theme', 'dark');
                }
            }
            
            function initTabs() {
                elements.tabBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const tabId = this.getAttribute('data-tab');
                        
                        // Update active tab button
                        elements.tabBtns.forEach(tb => tb.classList.remove('tab-active'));
                        this.classList.add('tab-active');
                        
                        // Show corresponding tab content
                        elements.tabContents.forEach(tc => {
                            if (tc.id === tabId) {
                                tc.classList.add('active');
                                tc.classList.remove('hidden');
                            } else {
                                tc.classList.remove('active');
                                tc.classList.add('hidden');
                            }
                        });
                    });
                });
                
                // Activate first tab by default
                if (elements.tabBtns.length > 0) {
                    elements.tabBtns[0].classList.add('tab-active');
                    const firstTabId = elements.tabBtns[0].getAttribute('data-tab');
                    document.getElementById(firstTabId).classList.add('active');
                }
            }
            
            function showToast(message, type = 'info') {
                const toast = document.createElement('div');
                const colors = {
                    success: 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200',
                    error: 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200',
                    warning: 'bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200',
                    info: 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200'
                };
                
                toast.className = `fixed bottom-4 right-4 px-4 py-2 rounded-lg shadow-lg ${colors[type]} flex items-center animate-fade-in text-sm`;
                toast.innerHTML = `
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 
                                      type === 'error' ? 'fa-exclamation-circle' : 
                                      type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'} 
                        mr-2"></i>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.classList.remove('animate-fade-in');
                    toast.classList.add('animate-fade-out');
                    setTimeout(() => {
                        document.body.removeChild(toast);
                    }, 300);
                }, 3000);
            }
            
            function normalizeUrl(url) {
                try {
                    const urlObj = new URL(url);
                    
                    // Remove tracking parameters
                    const trackingParams = [
                        'utm_', 'fbclid', 'gclid', 'msclkid', 'mc_cid', 
                        'mc_eid', '_ga', 'dclid', 'oly_anon_id', 'oly_enc_id',
                        'rb_clickid', 's_kwcid', 'vero_conv', 'vero_id'
                    ];
                    
                    trackingParams.forEach(param => {
                        urlObj.searchParams.forEach((value, key) => {
                            if (key.startsWith(param)) {
                                urlObj.searchParams.delete(key);
                            }
                        });
                    });
                    
                    // Clean YouTube URLs
                    if (urlObj.hostname.includes('youtube.com') || urlObj.hostname.includes('youtu.be')) {
                        if (urlObj.searchParams.has('v')) {
                            return `https://www.youtube.com/watch?v=${urlObj.searchParams.get('v')}`;
                        }
                    }
                    
                    // Clean Vimeo URLs
                    if (urlObj.hostname.includes('vimeo.com')) {
                        const videoId = urlObj.pathname.split('/').pop();
                        if (videoId) {
                            return `https://vimeo.com/${videoId}`;
                        }
                    }
                    
                    return urlObj.toString();
                } catch (e) {
                    return url;
                }
            }
            
            function fetchWithTimeout(url, options = {}) {
                const { timeout = 8000 } = options;
                
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), timeout);
                
                return fetch(url, {
                    ...options,
                    signal: controller.signal
                }).finally(() => clearTimeout(timeoutId));
            }
            
            function simulateAiProgress(statusElement, processingElement) {
                let progress = 0;
                const statusMessages = [
                    "Scanning page structure",
                    "Analyzing DOM elements",
                    "Detecting content patterns",
                    "Checking iframe content",
                    "Verifying sources",
                    "Finalizing results"
                ];
                
                if (aiProgressInterval) {
                    clearInterval(aiProgressInterval);
                }
                
                aiProgressInterval = setInterval(() => {
                    progress += Math.random() * 15;
                    if (progress > 100) progress = 100;
                    
                    // Update progress bar
                    processingElement.querySelector('.ai-processing-bar div').style.width = `${progress}%`;
                    
                    // Update status message
                    const statusIndex = Math.min(
                        Math.floor(progress / (100 / statusMessages.length)), 
                        statusMessages.length - 1
                    );
                    statusElement.textContent = statusMessages[statusIndex];
                    
                    if (progress >= 100) {
                        clearInterval(aiProgressInterval);
                    }
                }, 500);
                
                return aiProgressInterval;
            }
            
            function truncateMiddle(str, maxLength) {
                if (str.length <= maxLength) return str;
                const half = Math.floor(maxLength / 2);
                return str.substring(0, half) + '...' + str.substring(str.length - half);
            }
            
            // Video Extractor Functions
            async function analyzePage() {
                let url = elements.urlInput.value.trim();
                
                if (!url) {
                    showToast('Input Required', 'Please enter a website URL');
                    elements.urlInput.focus();
                    return;
                }
                
                // Add https:// if missing
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                
                // Clean URL
                url = normalizeUrl(url);
                
                try {
                    new URL(url);
                } catch (e) {
                    showToast('Invalid URL', 'Please enter a valid website URL');
                    return;
                }
                
                // UI States
                elements.emptyState.classList.add('hidden');
                elements.resultsSection.classList.add('hidden');
                elements.aiProcessing.classList.remove('hidden');
                
                // Start AI progress animation
                simulateAiProgress(elements.aiStatus, elements.aiProcessing);
                
                try {
                    // Use multiple CORS proxies as fallback
                    const proxies = [
                        `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                        `https://cors-anywhere.herokuapp.com/${url}`,
                        `https://thingproxy.freeboard.io/fetch/${url}`
                    ];
                    
                    // Try each proxy until one works
                    let response;
                    for (const proxy of proxies) {
                        try {
                            response = await fetchWithTimeout(proxy, { timeout: 5000 });
                            if (response.ok) break;
                        } catch (e) {
                            console.log(`Proxy failed: ${proxy}`);
                        }
                    }
                    
                    if (!response || !response.ok) {
                        throw new Error('Failed to fetch the webpage. The site may be blocking our requests.');
                    }
                    
                    const data = await response.json();
                    const htmlContent = data.contents || data;
                    
                    // Advanced video detection
                    extractedVideos = await detectAllVideoSources(htmlContent, url);
                    
                    if (extractedVideos.length === 0) {
                        showToast('No Videos Found', 'We couldn\'t find any videos on this page. Try another URL.');
                        return;
                    }
                    
                    displayVideoResults(extractedVideos);
                } catch (error) {
                    console.error('Analysis Error:', error);
                    showToast('Analysis Failed', error.message || 'An unknown error occurred while analyzing the page.');
                } finally {
                    clearInterval(aiProgressInterval);
                    elements.aiProcessing.classList.add('hidden');
                }
            }
            
            async function detectAllVideoSources(html, baseUrl) {
                return new Promise((resolve) => {
                    // Use setTimeout to simulate async processing
                    setTimeout(() => {
                        const foundUrls = new Set();
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        // 1. Detect standard video elements
                        const videoElements = doc.querySelectorAll('video, video source, iframe');
                        videoElements.forEach(el => {
                            const src = el.getAttribute('src');
                            if (src && isVideoSource(src)) {
                                foundUrls.add(resolveUrl(src, baseUrl));
                            }
                        });
                        
                        // 2. Detect background videos
                        const elementsWithBackground = doc.querySelectorAll('[style*="background"], [style*="video"]');
                        elementsWithBackground.forEach(el => {
                            const style = el.getAttribute('style');
                            const videoUrlMatch = style.match(/url\(["']?(.*\.(mp4|webm|ogg|mov))["']?\)/i);
                            if (videoUrlMatch && videoUrlMatch[1]) {
                                foundUrls.add(resolveUrl(videoUrlMatch[1], baseUrl));
                            }
                        });
                        
                        // 3. Detect JavaScript-loaded videos
                        const scriptTags = doc.querySelectorAll('script');
                        scriptTags.forEach(script => {
                            const scriptContent = script.textContent;
                            if (scriptContent) {
                                // Look for video URLs in scripts
                                const videoPatterns = [
                                    /(https?:\/\/[^"\s]+\.(mp4|webm|ogg|mov|m3u8))(?=["'\s])/gi,
                                    /(https?:\/\/[^"\s]+\.(youtube\.com|youtu\.be|vimeo\.com|dailymotion\.com)[^"\s]*)(?=["'\s])/gi,
                                    /(?:src|videoUrl|source)\s*[:=]\s*["']([^"']+\.(mp4|webm|ogg|mov))["']/gi
                                ];
                                
                                videoPatterns.forEach(pattern => {
                                    const matches = scriptContent.match(pattern);
                                    if (matches) {
                                        matches.forEach(match => {
                                            const cleanUrl = match.replace(/^src[:=]\s*["']|["']$/g, '');
                                            foundUrls.add(resolveUrl(cleanUrl, baseUrl));
                                        });
                                    }
                                });
                            }
                        });
                        
                        // 4. Detect in JSON-LD and meta tags
                        const metaTags = doc.querySelectorAll('meta[content*="video"], link[as="video"]');
                        metaTags.forEach(tag => {
                            const content = tag.getAttribute('content') || tag.getAttribute('href');
                            if (content && isVideoSource(content)) {
                                foundUrls.add(resolveUrl(content, baseUrl));
                            }
                        });
                        
                        // 5. Detect in data attributes
                        const dataVideoElements = doc.querySelectorAll('[data-video], [data-src*="video"], [data-url*=".mp4"], [data-url*=".webm"]');
                        dataVideoElements.forEach(el => {
                            const videoUrl = el.getAttribute('data-video') || 
                                           el.getAttribute('data-src') || 
                                           el.getAttribute('data-url');
                            if (videoUrl && isVideoSource(videoUrl)) {
                                foundUrls.add(resolveUrl(videoUrl, baseUrl));
                            }
                        });
                        
                        // Filter and return results
                        const filteredUrls = Array.from(foundUrls).filter(url => {
                            return url && !isExcludedUrl(url);
                        }).map(url => ({
                            url,
                            type: getVideoType(url),
                            quality: 'unknown'
                        }));
                        
                        resolve(filteredUrls);
                    }, 800); // Simulate processing time
                });
            }
            
            function isVideoSource(url) {
                return url.match(/\.(mp4|webm|ogg|mov|m3u8)$/i) || 
                       url.includes('youtube.com/watch') ||
                       url.includes('youtu.be/') ||
                       url.includes('vimeo.com/') ||
                       url.includes('dailymotion.com/video');
            }
            
            function resolveUrl(url, baseUrl) {
                if (url.startsWith('http')) return normalizeUrl(url);
                if (url.startsWith('//')) return normalizeUrl(`https:${url}`);
                if (url.startsWith('/')) {
                    const base = new URL(baseUrl);
                    return normalizeUrl(`${base.origin}${url}`);
                }
                return normalizeUrl(new URL(url, baseUrl).href);
            }
            
            function isExcludedUrl(url) {
                return url.match(/\.(css|js|json|png|jpg|jpeg|gif|svg|woff|woff2|ttf)(?=[?'"\s]|$)/i) ||
                       url.includes('googleads') ||
                       url.includes('doubleclick') ||
                       url.includes('tracking') ||
                       url.includes('analytics');
            }
            
            function getVideoType(url) {
                if (url.includes('youtube.com') || url.includes('youtu.be')) return 'YouTube';
                if (url.includes('vimeo.com')) return 'Vimeo';
                if (url.includes('dailymotion.com')) return 'Dailymotion';
                if (url.match(/\.(mp4|webm|ogg|mov)/i)) return 'Direct Video';
                if (url.match(/\.m3u8/i)) return 'HLS Stream';
                return 'Video';
            }
            
            function getVideoTypeColor(type) {
                switch(type) {
                    case 'YouTube': return 'bg-red-100 dark:bg-red-900/30 text-red-800 dark:text-red-200';
                    case 'Vimeo': return 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200';
                    case 'Dailymotion': return 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200';
                    case 'Direct Video': return 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200';
                    case 'HLS Stream': return 'bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200';
                    default: return 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200';
                }
            }
            
            function displayVideoResults(videos) {
                elements.emptyState.classList.add('hidden');
                elements.resultsSection.classList.remove('hidden');
                elements.resultsContainer.innerHTML = '';
                elements.resultCount.textContent = videos.length;
                
                videos.forEach((video, index) => {
                    const videoCard = document.createElement('div');
                    videoCard.className = 'glow-card bg-white dark:bg-dark-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700';
                    
                    const thumbnailUrl = getThumbnailUrl(video.url);
                    const displayUrl = truncateMiddle(video.url, 40);
                    
                    videoCard.innerHTML = `
                        <div class="video-thumbnail h-40 bg-gray-100 dark:bg-gray-700" style="background-image: url('${thumbnailUrl}')">
                            <div class="absolute inset-0 bg-black/30 flex items-center justify-center">
                                <div class="w-12 h-12 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center">
                                    <i class="fas fa-play text-white text-xl"></i>
                                </div>
                            </div>
                        </div>
                        <div class="p-4">
                            <div class="flex justify-between items-start mb-2">
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getVideoTypeColor(video.type)}">
                                    ${video.type}
                                </span>
                                <span class="text-xs text-gray-500">#${index + 1}</span>
                            </div>
                            <p class="text-sm font-medium mb-3 truncate" title="${video.url}">${displayUrl}</p>
                            <div class="flex space-x-2">
                                <button class="preview-btn flex-1 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-xs flex items-center justify-center"
                                        data-url="${encodeURIComponent(video.url)}" data-type="${video.type}">
                                    <i class="fas fa-eye mr-1"></i> Preview
                                </button>
                                <button class="download-btn px-3 py-1.5 bg-green-600 hover:bg-green-700 text-white rounded text-xs flex items-center justify-center"
                                        data-url="${encodeURIComponent(video.url)}" ${video.type === 'YouTube' || video.type === 'Vimeo' ? 'disabled' : ''}>
                                    <i class="fas fa-download mr-1"></i> Download
                                </button>
                            </div>
                        </div>
                    `;
                    
                    elements.resultsContainer.appendChild(videoCard);
                });
                
                // Add event listeners to buttons
                document.querySelectorAll('.preview-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const url = decodeURIComponent(this.getAttribute('data-url'));
                        const type = this.getAttribute('data-type');
                        showPreview(url, type);
                    });
                });
                
                document.querySelectorAll('.download-btn:not([disabled])').forEach(btn => {
                    btn.addEventListener('click', async function() {
                        const url = decodeURIComponent(this.getAttribute('data-url'));
                        await downloadVideo(url, this);
                    });
                });
            }
            
            function getThumbnailUrl(videoUrl) {
                if (videoUrl.includes('youtube.com') || videoUrl.includes('youtu.be')) {
                    const videoId = videoUrl.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|youtu\.be\/)([^"&?\/\s]{11})/i);
                    if (videoId && videoId[1]) {
                        return `https://img.youtube.com/vi/${videoId[1]}/mqdefault.jpg`;
                    }
                } else if (videoUrl.includes('vimeo.com')) {
                    const videoId = videoUrl.match(/(?:vimeo\.com\/|video\/)(\d+)/i);
                    if (videoId && videoId[1]) {
                        return `https://vumbnail.com/${videoId[1]}.jpg`;
                    }
                } else if (videoUrl.includes('dailymotion.com')) {
                    const videoId = videoUrl.match(/(?:dailymotion\.com\/video\/)([^_]+)/i);
                    if (videoId && videoId[1]) {
                        return `https://www.dailymotion.com/thumbnail/video/${videoId[1]}`;
                    }
                }
                return 'https://via.placeholder.com/300x169?text=Video+Thumbnail';
            }
            
            function extractVideos() {
                analyzePage();
            }
            
            function copyAllUrls() {
                if (extractedVideos.length === 0) {
                    showToast('No videos to copy', 'warning');
                    return;
                }
                
                const textToCopy = extractedVideos.map(v => v.url).join('\n\n');
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showToast(`Copied ${extractedVideos.length} URLs to clipboard!`, 'success');
                });
            }
            
            async function exportVideos() {
                if (extractedVideos.length === 0) {
                    showToast('No videos to export', 'warning');
                    return;
                }
                
                const exportData = {
                    date: new Date().toISOString(),
                    sourceUrl: elements.urlInput.value.trim(),
                    videos: extractedVideos
                };
                
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `og-toolkit-videos-${new Date().getTime()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Export completed!', 'success');
            }
            
            // Preview Modal Functions
            function showPreview(url, type = null) {
                currentPreviewUrl = url;
                elements.videoUrlElement.textContent = url;
                elements.videoTypeElement.textContent = type || getVideoType(url);
                elements.videoQualityElement.textContent = 'Auto-detecting...';
                elements.previewModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                
                // Clear previous content
                elements.videoPreviewContainer.innerHTML = '';
                
                // Show loading state
                elements.videoPreviewContainer.innerHTML = `
                    <div class="aspect-video flex items-center justify-center bg-black text-white">
                        <i class="fas fa-spinner fa-spin text-2xl"></i>
                    </div>
                `;
                
                // Set up the appropriate player
                setTimeout(() => {
                    setupVideoPlayer(url, type);
                }, 100);
            }
            
            function setupVideoPlayer(url, type = null) {
                const detectedType = type || getVideoType(url);
                
                if (detectedType === 'YouTube' || detectedType === 'Vimeo' || detectedType === 'Dailymotion') {
                    // Embedded video
                    const embedUrl = getEmbedUrl(url);
                    elements.videoPreviewContainer.innerHTML = `
                        <iframe src="${embedUrl}" 
                                frameborder="0" 
                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                allowfullscreen
                                class="w-full aspect-video"></iframe>
                    `;
                } else {
                    // Direct video file
                    elements.videoPreviewContainer.innerHTML = `
                        <video controls autoplay class="w-full aspect-video bg-black">
                            <source src="${url}" type="${getVideoMimeType(url)}">
                            Your browser does not support the video tag.
                        </video>
                    `;
                }
            }
            
            function getEmbedUrl(url) {
                if (url.includes('youtube.com') || url.includes('youtu.be')) {
                    let videoId = '';
                    if (url.includes('v=')) {
                        videoId = url.split('v=')[1].split('&')[0];
                    } else if (url.includes('youtu.be/')) {
                        videoId = url.split('youtu.be/')[1].split('?')[0];
                    }
                    return `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
                } else if (url.includes('vimeo.com')) {
                    const videoId = url.split('vimeo.com/')[1].split('?')[0];
                    return `https://player.vimeo.com/video/${videoId}?autoplay=1&title=0&byline=0`;
                } else if (url.includes('dailymotion.com')) {
                    const videoId = url.split('dailymotion.com/video/')[1].split('_')[0];
                    return `https://www.dailymotion.com/embed/video/${videoId}?autoplay=1`;
                }
                return url;
            }
            
            function getVideoMimeType(url) {
                if (url.includes('.mp4')) return 'video/mp4';
                if (url.includes('.webm')) return 'video/webm';
                if (url.includes('.ogg')) return 'video/ogg';
                if (url.includes('.mov')) return 'video/quicktime';
                return 'video/mp4';
            }
            
            function closePreview() {
                elements.previewModal.classList.add('hidden');
                document.body.style.overflow = '';
                // Reset download progress
                elements.downloadBtn.style.setProperty('--download-speed', '0%');
            }
            
            function copyCurrentUrl() {
                navigator.clipboard.writeText(currentPreviewUrl).then(() => {
                    showToast('URL copied to clipboard!', 'success');
                });
            }
            
            // Enhanced Download Function with Progress Tracking
            async function downloadVideo(url, button = null) {
                // Abort any previous download
                if (downloadController) {
                    downloadController.abort();
                }
                
                downloadController = new AbortController();
                const signal = downloadController.signal;
                
                try {
                    // Show loading state on button
                    if (button) {
                        button.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Preparing...';
                        button.disabled = true;
                    } else {
                        elements.downloadBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Preparing...';
                        elements.downloadBtn.disabled = true;
                    }
                    
                    // Extract filename from URL or generate one
                    let filename = url.split('/').pop();
                    if (!filename || filename.length > 50 || !filename.includes('.')) {
                        const ext = url.split('.').pop().split('?')[0];
                        filename = `video-${new Date().getTime()}.${ext}`;
                    }
                    
                    // Start the download
                    const response = await fetch(url, { signal });
                    
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const contentLength = response.headers.get('content-length');
                    const reader = response.body.getReader();
                    let receivedLength = 0;
                    let chunks = [];
                    
                    // Read the stream
                    while(true) {
                        const { done, value } = await reader.read();
                        
                        if (done) break;
                        
                        chunks.push(value);
                        receivedLength += value.length;
                        
                        // Update progress
                        if (contentLength) {
                            const percent = Math.round((receivedLength / contentLength) * 100);
                            updateDownloadProgress(percent, button);
                        }
                    }
                    
                    // Combine chunks
                    const blob = new Blob(chunks);
                    const blobUrl = URL.createObjectURL(blob);
                    
                    // Create download link
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up
                    setTimeout(() => {
                        URL.revokeObjectURL(blobUrl);
                    }, 100);
                    
                    showToast('Download completed!', 'success');
                } catch (error) {
                    if (error.name !== 'AbortError') {
                        console.error('Download Error:', error);
                        showToast('Download failed', 'error');
                    }
                } finally {
                    // Reset button state
                    if (button) {
                        button.innerHTML = '<i class="fas fa-download mr-1"></i> Download';
                        button.disabled = false;
                    } else {
                        elements.downloadBtn.innerHTML = '<i class="fas fa-download mr-1"></i> Download';
                        elements.downloadBtn.disabled = false;
                    }
                    downloadController = null;
                }
            }
            
            function updateDownloadProgress(percent, button = null) {
                if (button) {
                    button.style.setProperty('--download-speed', `${percent}%`);
                    button.innerHTML = `<i class="fas fa-download mr-1"></i> ${percent}%`;
                } else {
                    elements.downloadBtn.style.setProperty('--download-speed', `${percent}%`);
                    elements.downloadBtn.innerHTML = `<i class="fas fa-download mr-1"></i> ${percent}%`;
                }
            }
            
            // Download HD version (for supported platforms)
            async function downloadHdVersion() {
                if (currentPreviewUrl.includes('youtube.com')) {
                    showToast('For YouTube videos, use a YouTube downloader', 'info');
                } else if (currentPreviewUrl.includes('vimeo.com')) {
                    showToast('For Vimeo videos, use a Vimeo downloader', 'info');
                } else {
                    showToast('HD download not available for this video', 'info');
                }
            }
            
            // Analyze video quality
            async function analyzeVideoQuality() {
                elements.videoQualityElement.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Analyzing...';
                
                // Simulate analysis
                setTimeout(() => {
                    if (currentPreviewUrl.includes('youtube.com')) {
                        elements.videoQualityElement.textContent = '1080p (HD) available';
                    } else if (currentPreviewUrl.includes('vimeo.com')) {
                        elements.videoQualityElement.textContent = '720p (HD) available';
                    } else if (currentPreviewUrl.match(/\.mp4$/i)) {
                        elements.videoQualityElement.textContent = '720p (HD) detected';
                    } else {
                        elements.videoQualityElement.textContent = 'Standard quality';
                    }
                }, 1500);
            }
            
            // Image Extractor Functions
            async function analyzeImages() {
                let url = elements.imageUrlInput.value.trim();
                
                if (!url) {
                    showToast('Input Required', 'Please enter a website URL');
                    elements.imageUrlInput.focus();
                    return;
                }
                
                // Add https:// if missing
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                
                // Clean URL
                url = normalizeUrl(url);
                
                try {
                    new URL(url);
                } catch (e) {
                    showToast('Invalid URL', 'Please enter a valid website URL');
                    return;
                }
                
                // UI States
                elements.imageEmptyState.classList.add('hidden');
                elements.imageResultsSection.classList.add('hidden');
                elements.imageAiProcessing.classList.remove('hidden');
                
                // Start AI progress animation
                simulateAiProgress(elements.imageAiStatus, elements.imageAiProcessing);
                
                try {
                    // Use multiple CORS proxies as fallback
                    const proxies = [
                        `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                        `https://cors-anywhere.herokuapp.com/${url}`,
                        `https://thingproxy.freeboard.io/fetch/${url}`
                    ];
                    
                    // Try each proxy until one works
                    let response;
                    for (const proxy of proxies) {
                        try {
                            response = await fetchWithTimeout(proxy, { timeout: 5000 });
                            if (response.ok) break;
                        } catch (e) {
                            console.log(`Proxy failed: ${proxy}`);
                        }
                    }
                    
                    if (!response || !response.ok) {
                        throw new Error('Failed to fetch the webpage. The site may be blocking our requests.');
                    }
                    
                    const data = await response.json();
                    const htmlContent = data.contents || data;
                    
                    // Advanced image detection
                    extractedImages = await detectAllImageSources(htmlContent, url);
                    
                    if (extractedImages.length === 0) {
                        showToast('No Images Found', 'We couldn\'t find any images on this page. Try another URL.');
                        return;
                    }
                    
                    displayImageResults(extractedImages);
                } catch (error) {
                    console.error('Analysis Error:', error);
                    showToast('Analysis Failed', error.message || 'An unknown error occurred while analyzing the page.');
                } finally {
                    clearInterval(aiProgressInterval);
                    elements.imageAiProcessing.classList.add('hidden');
                }
            }
            
            async function detectAllImageSources(html, baseUrl) {
                return new Promise((resolve) => {
                    // Use setTimeout to simulate async processing
                    setTimeout(() => {
                        const foundUrls = new Set();
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        // 1. Detect standard image elements
                        const imgElements = doc.querySelectorAll('img, picture source');
                        imgElements.forEach(el => {
                            const src = el.getAttribute('src') || el.getAttribute('srcset') || el.getAttribute('data-src');
                            if (src) {
                                // Handle srcset (take the first URL)
                                const firstSrc = src.split(',')[0].trim().split(' ')[0];
                                if (isImageSource(firstSrc)) {
                                    foundUrls.add(resolveUrl(firstSrc, baseUrl));
                                }
                            }
                        });
                        
                        // 2. Detect background images
                        const elementsWithBackground = doc.querySelectorAll('[style*="background"]');
                        elementsWithBackground.forEach(el => {
                            const style = el.getAttribute('style');
                            const imageUrlMatch = style.match(/url\(["']?(.*\.(jpg|jpeg|png|gif|webp|svg))["']?\)/i);
                            if (imageUrlMatch && imageUrlMatch[1]) {
                                foundUrls.add(resolveUrl(imageUrlMatch[1], baseUrl));
                            }
                        });
                        
                        // 3. Detect in JSON-LD and meta tags
                        const metaTags = doc.querySelectorAll('meta[content*="image"], link[as="image"]');
                        metaTags.forEach(tag => {
                            const content = tag.getAttribute('content') || tag.getAttribute('href');
                            if (content && isImageSource(content)) {
                                foundUrls.add(resolveUrl(content, baseUrl));
                            }
                        });
                        
                        // 4. Detect in data attributes
                        const dataImageElements = doc.querySelectorAll('[data-image], [data-src*="image"], [data-url*=".jpg"], [data-url*=".png"], [data-url*=".webp"]');
                        dataImageElements.forEach(el => {
                            const imageUrl = el.getAttribute('data-image') || 
                                           el.getAttribute('data-src') || 
                                           el.getAttribute('data-url');
                            if (imageUrl && isImageSource(imageUrl)) {
                                foundUrls.add(resolveUrl(imageUrl, baseUrl));
                            }
                        });
                        
                        // 5. Detect OpenGraph/Twitter images
                        const ogImage = doc.querySelector('meta[property="og:image"], meta[name="og:image"]');
                        if (ogImage && ogImage.getAttribute('content')) {
                            foundUrls.add(resolveUrl(ogImage.getAttribute('content'), baseUrl));
                        }
                        
                        const twitterImage = doc.querySelector('meta[name="twitter:image"]');
                        if (twitterImage && twitterImage.getAttribute('content')) {
                            foundUrls.add(resolveUrl(twitterImage.getAttribute('content'), baseUrl));
                        }
                        
                        // Filter and return results
                        const filteredUrls = Array.from(foundUrls).filter(url => {
                            return url && !isExcludedUrl(url);
                        }).map(url => ({
                            url,
                            type: getImageType(url),
                            dimensions: 'unknown',
                            size: 'unknown'
                        }));
                        
                        resolve(filteredUrls);
                    }, 800); // Simulate processing time
                });
            }
            
            function isImageSource(url) {
                return url.match(/\.(jpg|jpeg|png|gif|webp|svg)(?=[?'"\s]|$)/i) ||
                       url.includes('data:image/');
            }
            
            function getImageType(url) {
                if (url.includes('.jpg') || url.includes('.jpeg')) return 'JPG';
                if (url.includes('.png')) return 'PNG';
                if (url.includes('.webp')) return 'WebP';
                if (url.includes('.svg')) return 'SVG';
                if (url.includes('.gif')) return 'GIF';
                if (url.includes('data:image/')) return 'Base64';
                return 'Image';
            }
            
            function getImageTypeColor(type) {
                switch(type) {
                    case 'JPG': return 'bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200';
                    case 'PNG': return 'bg-orange-100 dark:bg-orange-900/30 text-orange-800 dark:text-orange-200';
                    case 'WebP': return 'bg-purple-100 dark:bg-purple-900/30 text-purple-800 dark:text-purple-200';
                    case 'SVG': return 'bg-green-100 dark:bg-green-900/30 text-green-800 dark:text-green-200';
                    case 'GIF': return 'bg-pink-100 dark:bg-pink-900/30 text-pink-800 dark:text-pink-200';
                    case 'Base64': return 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200';
                    default: return 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200';
                }
            }
            
            function displayImageResults(images) {
                elements.imageEmptyState.classList.add('hidden');
                elements.imageResultsSection.classList.remove('hidden');
                elements.imageResultsContainer.innerHTML = '';
                elements.imageResultCount.textContent = images.length;
                selectedImagesForDownload = [...images];
                updateDownloadAllButton();
                
                images.forEach((image, index) => {
                    const imageCard = document.createElement('div');
                    imageCard.className = 'glow-card bg-white dark:bg-dark-800 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700';
                    imageCard.dataset.type = image.type.toLowerCase();
                    imageCard.dataset.size = getImageSizeCategory(image.dimensions);
                    
                    const displayUrl = truncateMiddle(image.url, 30);
                    
                    imageCard.innerHTML = `
                        <div class="image-thumbnail h-32 bg-gray-100 dark:bg-gray-700 relative">
                            <img src="${image.url}" alt="Thumbnail" class="w-full h-full object-cover" onerror="this.src='https://via.placeholder.com/300?text=Image+Error'">
                            <div class="absolute inset-0 bg-black/10 flex items-center justify-center opacity-0 hover:opacity-100 transition">
                                <button class="preview-image-btn p-2 bg-white/80 hover:bg-white text-gray-800 rounded-full">
                                    <i class="fas fa-expand"></i>
                                </button>
                            </div>
                            <div class="absolute top-1 right-1">
                                <label class="inline-flex items-center">
                                    <input type="checkbox" class="image-checkbox rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-offset-0 focus:ring-indigo-200 focus:ring-opacity-50" checked>
                                </label>
                            </div>
                        </div>
                        <div class="p-3">
                            <div class="flex justify-between items-start mb-1">
                                <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${getImageTypeColor(image.type)}">
                                    ${image.type}
                                </span>
                                <span class="text-xs text-gray-500">#${index + 1}</span>
                            </div>
                            <p class="text-xs font-medium mb-2 truncate" title="${image.url}">${displayUrl}</p>
                            <div class="flex justify-between items-center">
                                <button class="download-image-btn px-2 py-1 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-xs flex items-center"
                                        data-url="${encodeURIComponent(image.url)}">
                                    <i class="fas fa-download mr-1 text-xs"></i>
                                </button>
                                <span class="text-xs text-gray-500 truncate ml-2">${image.dimensions || 'Unknown'}</span>
                            </div>
                        </div>
                    `;
                    
                    elements.imageResultsContainer.appendChild(imageCard);
                    
                    // Add event listeners
                    const checkbox = imageCard.querySelector('.image-checkbox');
                    checkbox.addEventListener('change', function() {
                        if (this.checked) {
                            selectedImagesForDownload.push(image);
                        } else {
                            selectedImagesForDownload = selectedImagesForDownload.filter(img => img.url !== image.url);
                        }
                        updateDownloadAllButton();
                    });
                    
                    const previewBtn = imageCard.querySelector('.preview-image-btn');
                    previewBtn.addEventListener('click', function() {
                        showImagePreview(image.url, image.type);
                    });
                    
                    const downloadBtn = imageCard.querySelector('.download-image-btn');
                    downloadBtn.addEventListener('click', function() {
                        const url = decodeURIComponent(this.getAttribute('data-url'));
                        downloadImage(url);
                    });
                    
                    // Load image dimensions
                    loadImageDimensions(image.url, imageCard);
                });
            }
            
            function getImageSizeCategory(dimensions) {
                if (!dimensions || dimensions === 'unknown') return 'unknown';
                
                const match = dimensions.match(/(\d+)x(\d+)/);
                if (!match) return 'unknown';
                
                const width = parseInt(match[1]);
                if (width < 500) return 'small';
                if (width < 1000) return 'medium';
                return 'large';
            }
            
            async function loadImageDimensions(url, container) {
                try {
                    const img = new Image();
                    img.src = url;
                    
                    await img.decode();
                    
                    const dimensions = `${img.width}x${img.height}`;
                    const sizeText = container.querySelector('.text-xs.text-gray-500:not(.ml-2)');
                    if (sizeText) {
                        sizeText.textContent = dimensions;
                    }
                    
                    // Update size category
                    container.dataset.size = getImageSizeCategory(dimensions);
                } catch (error) {
                    console.error('Error loading image dimensions:', error);
                }
            }
            
            function extractImages() {
                analyzeImages();
            }
            
            function filterImages() {
                const sizeFilter = elements.imageSizeFilter.value;
                const typeFilter = elements.imageTypeFilter.value;
                
                document.querySelectorAll('#image-results-container > div').forEach(card => {
                    const matchesSize = sizeFilter === 'all' || card.dataset.size === sizeFilter;
                    const matchesType = typeFilter === 'all' || card.dataset.type === typeFilter.toLowerCase();
                    
                    if (matchesSize && matchesType) {
                        card.classList.remove('hidden');
                    } else {
                        card.classList.add('hidden');
                    }
                });
            }
            
            function copyAllImageUrls() {
                if (extractedImages.length === 0) {
                    showToast('No images to copy', 'warning');
                    return;
                }
                
                const textToCopy = extractedImages.map(img => img.url).join('\n\n');
                navigator.clipboard.writeText(textToCopy).then(() => {
                    showToast(`Copied ${extractedImages.length} URLs to clipboard!`, 'success');
                });
            }
            
            async function exportImages() {
                if (extractedImages.length === 0) {
                    showToast('No images to export', 'warning');
                    return;
                }
                
                const exportData = {
                    date: new Date().toISOString(),
                    sourceUrl: elements.imageUrlInput.value.trim(),
                    images: extractedImages
                };
                
                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `og-toolkit-images-${new Date().getTime()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Export completed!', 'success');
            }
            
            function updateDownloadAllButton() {
                elements.downloadAllCount.textContent = selectedImagesForDownload.length;
                if (selectedImagesForDownload.length > 0) {
                    elements.downloadAllCount.classList.remove('hidden');
                    elements.downloadAllImagesBtn.disabled = false;
                } else {
                    elements.downloadAllCount.classList.add('hidden');
                    elements.downloadAllImagesBtn.disabled = true;
                }
            }
            
            async function downloadSelectedImages() {
                if (selectedImagesForDownload.length === 0) {
                    showToast('No images selected', 'warning');
                    return;
                }
                
                elements.downloadAllImagesBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Preparing...';
                elements.downloadAllImagesBtn.disabled = true;
                
                try {
                    // Create a zip file
                    const JSZip = await loadJSZip();
                    const zip = new JSZip();
                    
                    // Add each image to the zip
                    for (const [index, image] of selectedImagesForDownload.entries()) {
                        try {
                            const response = await fetch(image.url);
                            if (!response.ok) continue;
                            
                            const blob = await response.blob();
                            const filename = `image-${index + 1}.${getImageExtension(image.type)}`;
                            zip.file(filename, blob);
                            
                            // Update progress
                            elements.downloadAllImagesBtn.innerHTML = `<i class="fas fa-spinner fa-spin mr-1"></i> ${index + 1}/${selectedImagesForDownload.length}`;
                        } catch (error) {
                            console.error(`Error downloading image ${image.url}:`, error);
                        }
                    }
                    
                    // Generate the zip file
                    const content = await zip.generateAsync({ type: 'blob' });
                    const zipUrl = URL.createObjectURL(content);
                    
                    // Download the zip
                    const a = document.createElement('a');
                    a.href = zipUrl;
                    a.download = `images-${new Date().getTime()}.zip`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up
                    setTimeout(() => {
                        URL.revokeObjectURL(zipUrl);
                    }, 100);
                    
                    showToast(`Downloaded ${selectedImagesForDownload.length} images!`, 'success');
                } catch (error) {
                    console.error('Error creating zip file:', error);
                    showToast('Failed to create zip file', 'error');
                } finally {
                    elements.downloadAllImagesBtn.innerHTML = '<i class="fas fa-download mr-1"></i> Download All';
                    elements.downloadAllImagesBtn.disabled = false;
                }
            }
            
            function getImageExtension(type) {
                switch(type.toLowerCase()) {
                    case 'jpg': return 'jpg';
                    case 'jpeg': return 'jpeg';
                    case 'png': return 'png';
                    case 'gif': return 'gif';
                    case 'webp': return 'webp';
                    case 'svg': return 'svg';
                    default: return 'jpg';
                }
            }
            
            function loadJSZip() {
                return new Promise((resolve, reject) => {
                    if (window.JSZip) {
                        resolve(window.JSZip);
                        return;
                    }
                    
                    const script = document.createElement('script');
                    script.src = 'https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js';
                    script.onload = () => resolve(window.JSZip);
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }
            
            // Image Preview Functions
            function showImagePreview(url, type = null) {
                currentPreviewImageUrl = url;
                elements.imageUrlElement.textContent = url;
                elements.imageTypeElement.textContent = type || getImageType(url);
                elements.imageDimensionsElement.textContent = 'Loading...';
                elements.imageSizeElement.textContent = 'Loading...';
                elements.imagePreviewModal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                
                // Set image source
                elements.previewedImage.src = url;
                
                // Load image details
                loadImageDetails(url);
            }
            
            async function loadImageDetails(url) {
                try {
                    const img = new Image();
                    img.src = url;
                    
                    await img.decode();
                    
                    elements.imageDimensionsElement.textContent = `${img.width}x${img.height}`;
                    
                    // Get image size
                    const response = await fetch(url, { method: 'HEAD' });
                    if (response.ok) {
                        const contentLength = response.headers.get('content-length');
                        if (contentLength) {
                            elements.imageSizeElement.textContent = formatFileSize(contentLength);
                        } else {
                            elements.imageSizeElement.textContent = 'Unknown';
                        }
                    } else {
                        elements.imageSizeElement.textContent = 'Unknown';
                    }
                } catch (error) {
                    console.error('Error loading image details:', error);
                    elements.imageDimensionsElement.textContent = 'Error';
                    elements.imageSizeElement.textContent = 'Error';
                }
            }
            
            function formatFileSize(bytes) {
                if (typeof bytes !== 'number') bytes = parseInt(bytes);
                if (isNaN(bytes)) return 'Unknown';
                
                if (bytes < 1024) return `${bytes} B`;
                if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;
                if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;
                return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;
            }
            
            function closeImagePreview() {
                elements.imagePreviewModal.classList.add('hidden');
                document.body.style.overflow = '';
                // Reset image source
                elements.previewedImage.src = '';
            }
            
            function copyCurrentImageUrl() {
                navigator.clipboard.writeText(currentPreviewImageUrl).then(() => {
                    showToast('URL copied to clipboard!', 'success');
                });
            }
            
            async function downloadImage(url, original = false) {
                try {
                    elements.downloadImageBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-1"></i> Preparing...';
                    elements.downloadImageBtn.disabled = true;
                    
                    // Extract filename from URL or generate one
                    let filename = url.split('/').pop();
                    if (!filename || filename.length > 50 || !filename.includes('.')) {
                        const ext = url.split('.').pop().split('?')[0] || 'jpg';
                        filename = `image-${new Date().getTime()}.${ext}`;
                    }
                    
                    // For original download (no modifications)
                    if (original) {
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = filename;
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        
                        showToast('Download started!', 'success');
                        return;
                    }
                    
                    // For standard download (can add processing here if needed)
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    
                    const blob = await response.blob();
                    const blobUrl = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = blobUrl;
                    a.download = filename;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    // Clean up
                    setTimeout(() => {
                        URL.revokeObjectURL(blobUrl);
                    }, 100);
                    
                    showToast('Download completed!', 'success');
                } catch (error) {
                    console.error('Download Error:', error);
                    showToast('Download failed', 'error');
                } finally {
                    elements.downloadImageBtn.innerHTML = '<i class="fas fa-download mr-1"></i> Download';
                    elements.downloadImageBtn.disabled = false;
                }
            }
            
            function openImageInNewTab() {
                window.open(currentPreviewImageUrl, '_blank');
            }
            
            // Website Analyzer Functions
            async function analyzeWebsite() {
                let url = elements.analyzerUrlInput.value.trim();
                
                if (!url) {
                    showToast('Input Required', 'Please enter a website URL');
                    elements.analyzerUrlInput.focus();
                    return;
                }
                
                // Add https:// if missing
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                
                // Clean URL
                url = normalizeUrl(url);
                
                try {
                    new URL(url);
                } catch (e) {
                    showToast('Invalid URL', 'Please enter a valid website URL');
                    return;
                }
                
                // UI States
                elements.websiteEmptyState.classList.add('hidden');
                elements.websiteResultsSection.classList.add('hidden');
                elements.websiteAiProcessing.classList.remove('hidden');
                
                // Start AI progress animation
                simulateAiProgress(elements.websiteAiStatus, elements.websiteAiProcessing);
                
                try {
                    // Use multiple CORS proxies as fallback
                    const proxies = [
                        `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                        `https://cors-anywhere.herokuapp.com/${url}`,
                        `https://thingproxy.freeboard.io/fetch/${url}`
                    ];
                    
                    // Try each proxy until one works
                    let response;
                    for (const proxy of proxies) {
                        try {
                            response = await fetchWithTimeout(proxy, { timeout: 5000 });
                            if (response.ok) break;
                        } catch (e) {
                            console.log(`Proxy failed: ${proxy}`);
                        }
                    }
                    
                    if (!response || !response.ok) {
                        throw new Error('Failed to fetch the webpage. The site may be blocking our requests.');
                    }
                    
                    const data = await response.json();
                    const htmlContent = data.contents || data;
                    
                    // Analyze website
                    const analysisResults = await analyzeWebsiteContent(htmlContent, url);
                    
                    displayWebsiteAnalysisResults(analysisResults, url);
                } catch (error) {
                    console.error('Analysis Error:', error);
                    showToast('Analysis Failed', error.message || 'An unknown error occurred while analyzing the page.');
                } finally {
                    clearInterval(aiProgressInterval);
                    elements.websiteAiProcessing.classList.add('hidden');
                }
            }
            
            async function deepScanWebsite() {
                showToast('Deep scan feature requires server-side processing (not implemented in this demo)', 'info');
            }
            
            async function analyzeWebsiteContent(html, url) {
                return new Promise((resolve) => {
                    // Use setTimeout to simulate async processing
                    setTimeout(() => {
                        const parser = new DOMParser();
                        const doc = parser.parseFromString(html, 'text/html');
                        
                        // Basic information
                        const title = doc.querySelector('title')?.textContent || 'No title';
                        const description = doc.querySelector('meta[name="description"]')?.getAttribute('content') || 'No description';
                        
                        // Favicon
                        let favicon = doc.querySelector('link[rel="icon"], link[rel="shortcut icon"]')?.getAttribute('href');
                        if (favicon && !favicon.startsWith('http')) {
                            const baseUrl = new URL(url);
                            favicon = `${baseUrl.origin}${favicon.startsWith('/') ? '' : '/'}${favicon}`;
                        }
                        
                        // Technology detection
                        const technologies = detectTechnologies(doc);
                        
                        // CMS detection
                        const cms = detectCMS(doc);
                        
                        // Performance metrics (simulated)
                        const pageSize = Math.floor(Math.random() * 500) + 500; // 500-1000 KB
                        const loadTime = (Math.random() * 2 + 1).toFixed(2); // 1-3 seconds
                        const requestCount = Math.floor(Math.random() * 50) + 30; // 30-80 requests
                        
                        // Security analysis
                        const isHttps = url.startsWith('https://');
                        const securityHeaders = isHttps ? 'HTTPS, Secure' : 'HTTP (Not Secure)';
                        
                        // Server information (simulated)
                        const webServers = ['Apache', 'Nginx', 'IIS', 'Cloudflare', 'LiteSpeed'];
                        const hostingProviders = ['AWS', 'Google Cloud', 'Azure', 'DigitalOcean', 'HostGator', 'Bluehost'];
                        const webServer = webServers[Math.floor(Math.random() * webServers.length)];
                        const hostingProvider = hostingProviders[Math.floor(Math.random() * hostingProviders.length)];
                        
                        resolve({
                            url,
                            title,
                            description,
                            favicon,
                            technologies,
                            cms,
                            pageSize,
                            loadTime,
                            requestCount,
                            isHttps,
                            securityHeaders,
                            webServer,
                            hostingProvider,
                            ipAddress: '192.168.1.1' // Simulated
                        });
                    }, 1500); // Simulate processing time
                });
            }
            
            function detectTechnologies(doc) {
                const technologies = [];
                
                // Detect jQuery
                if (doc.querySelector('script[src*="jquery"]') || 
                    (doc.querySelector('script')?.textContent.includes('jQuery') || 
                     doc.querySelector('script')?.textContent.includes('$('))) {
                    technologies.push('jQuery');
                }
                
                // Detect React
                if (doc.querySelector('[data-reactroot], [data-reactid]') || 
                    Array.from(doc.querySelectorAll('script')).some(s => 
                        s.src.includes('react.') || s.textContent.includes('React.createElement'))) {
                    technologies.push('React');
                }
                
                // Detect Vue
                if (doc.querySelector('[data-v-app]') || 
                    Array.from(doc.querySelectorAll('script')).some(s => 
                        s.src.includes('vue.') || s.textContent.includes('new Vue('))) {
                    technologies.push('Vue.js');
                }
                
                // Detect Angular
                if (doc.querySelector('[ng-app], [data-ng-app]') || 
                    Array.from(doc.querySelectorAll('script')).some(s => 
                        s.src.includes('angular.') || s.textContent.includes('angular.module'))) {
                    technologies.push('Angular');
                }
                
                // Detect Bootstrap
                if (doc.querySelector('link[href*="bootstrap"]') || 
                    doc.querySelector('[class*="col-"], [class*="container"]')) {
                    technologies.push('Bootstrap');
                }
                
                // Detect Tailwind CSS
                if (doc.querySelector('[class*="bg-"], [class*="text-"], [class*="p-"], [class*="m-"]') && 
                    !doc.querySelector('link[href*="bootstrap"]')) {
                    technologies.push('Tailwind CSS');
                }
                
                // Detect Google Analytics
                if (doc.querySelector('script[src*="google-analytics.com"], script[src*="googletagmanager.com"]') || 
                    Array.from(doc.querySelectorAll('script')).some(s => 
                        s.textContent.includes('ga(') || s.textContent.includes('gtag('))) {
                    technologies.push('Google Analytics');
                }
                
                // Detect WordPress
                if (doc.querySelector('link[href*="wp-content"], link[href*="wp-includes"]') || 
                    doc.querySelector('meta[name="generator"][content*="WordPress"]')) {
                    technologies.push('WordPress');
                }
                
                // Detect Shopify
                if (doc.querySelector('[data-shopify]') || 
                    doc.querySelector('script[src*="shopify.com"]')) {
                    technologies.push('Shopify');
                }
                
                // Detect WooCommerce
                if (technologies.includes('WordPress') && 
                    (doc.querySelector('link[href*="woocommerce"]') || 
                     doc.querySelector('script[src*="woocommerce"]'))) {
                    technologies.push('WooCommerce');
                }
                
                return technologies.length > 0 ? technologies : ['Unknown (Static HTML)'];
            }
            
            function detectCMS(doc) {
                // WordPress
                if (doc.querySelector('meta[name="generator"][content*="WordPress"]') || 
                    doc.querySelector('link[href*="wp-content"], link[href*="wp-includes"]')) {
                    return {
                        name: 'WordPress',
                        logo: '<i class="fab fa-wordpress text-blue-500 text-2xl"></i>'
                    };
                }
                
                // Shopify
                if (doc.querySelector('[data-shopify]') || 
                    doc.querySelector('script[src*="shopify.com"]')) {
                    return {
                        name: 'Shopify',
                        logo: '<i class="fab fa-shopify text-green-500 text-2xl"></i>'
                    };
                }
                
                // Joomla
                if (doc.querySelector('meta[name="generator"][content*="Joomla"]') || 
                    doc.querySelector('script[src*="joomla"]')) {
                    return {
                        name: 'Joomla',
                        logo: '<i class="fab fa-joomla text-orange-500 text-2xl"></i>'
                    };
                }
                
                // Drupal
                if (doc.querySelector('meta[name="Generator"][content*="Drupal"]') || 
                    doc.querySelector('link[href*="sites/default/files"]')) {
                    return {
                        name: 'Drupal',
                        logo: '<i class="fab fa-drupal text-blue-600 text-2xl"></i>'
                    };
                }
                
                // Magento
                if (doc.querySelector('script[src*="magento"]') || 
                    doc.querySelector('link[href*="magento"]')) {
                    return {
                        name: 'Magento',
                        logo: '<i class="fab fa-magento text-orange-600 text-2xl"></i>'
                    };
                }
                
                // Custom or unknown
                return {
                    name: 'Unknown or Custom CMS',
                    logo: '<i class="fas fa-question text-gray-500 text-2xl"></i>'
                };
            }
            
            function displayWebsiteAnalysisResults(results, url) {
                elements.websiteEmptyState.classList.add('hidden');
                elements.websiteResultsSection.classList.remove('hidden');
                
                // Basic information
                elements.websiteUrl.textContent = url;
                elements.websiteTitle.textContent = results.title;
                elements.websiteDescription.textContent = results.description;
                
                // Favicon
                if (results.favicon) {
                    elements.websiteFavicon.innerHTML = `<img src="${results.favicon}" alt="Favicon" class="w-6 h-6">`;
                } else {
                    elements.websiteFavicon.innerHTML = '<i class="fas fa-globe text-gray-400"></i>';
                }
                
                // Technology stack
                elements.techStackContainer.innerHTML = '';
                results.technologies.forEach(tech => {
                    const techTag = document.createElement('div');
                    techTag.className = 'px-3 py-1 bg-indigo-100 dark:bg-indigo-900/20 text-indigo-800 dark:text-indigo-200 rounded-full text-xs flex items-center';
                    techTag.innerHTML = `<i class="fas fa-check-circle mr-1"></i> ${tech}`;
                    elements.techStackContainer.appendChild(techTag);
                });
                
                // Performance metrics
                elements.pageSize.textContent = `${results.pageSize} KB`;
                elements.loadTime.textContent = `${results.loadTime} seconds`;
                elements.requestCount.textContent = `${results.requestCount} requests`;
                
                // Security analysis
                elements.httpsStatus.textContent = results.isHttps ? 'Yes (Secure)' : 'No (Not Secure)';
                elements.httpsStatus.className = results.isHttps ? 'text-sm font-medium text-green-600' : 'text-sm font-medium text-red-600';
                elements.securityHeaders.textContent = results.securityHeaders;
                
                // CMS detection
                elements.cmsDetected.textContent = results.cms.name;
                elements.cmsLogo.innerHTML = results.cms.logo;
                
                // Server information
                elements.webServer.textContent = results.webServer;
                elements.ipAddress.textContent = results.ipAddress;
                elements.hostingProvider.textContent = results.hostingProvider;
            }
            
            async function exportWebsiteReport() {
                const reportData = {
                    date: new Date().toISOString(),
                    url: elements.websiteUrl.textContent,
                    title: elements.websiteTitle.textContent,
                    description: elements.websiteDescription.textContent,
                    technologies: Array.from(elements.techStackContainer.children).map(el => el.textContent.trim()),
                    cms: elements.cmsDetected.textContent,
                    pageSize: elements.pageSize.textContent,
                    loadTime: elements.loadTime.textContent,
                    requestCount: elements.requestCount.textContent,
                    https: elements.httpsStatus.textContent,
                    securityHeaders: elements.securityHeaders.textContent,
                    webServer: elements.webServer.textContent,
                    hostingProvider: elements.hostingProvider.textContent,
                    ipAddress: elements.ipAddress.textContent
                };
                
                const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `website-report-${new Date().getTime()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Report exported!', 'success');
            }
            
            // Metadata Extractor Functions
            async function analyzeMetadata() {
                let url = elements.metadataUrlInput.value.trim();
                
                if (!url) {
                    showToast('Input Required', 'Please enter a website URL');
                    elements.metadataUrlInput.focus();
                    return;
                }
                
                // Add https:// if missing
                if (!url.startsWith('http://') && !url.startsWith('https://')) {
                    url = 'https://' + url;
                }
                
                // Clean URL
                url = normalizeUrl(url);
                
                try {
                    new URL(url);
                } catch (e) {
                    showToast('Invalid URL', 'Please enter a valid website URL');
                    return;
                }
                
                // UI States
                elements.metadataEmptyState.classList.add('hidden');
                elements.metadataResultsSection.classList.add('hidden');
                elements.metadataAiProcessing.classList.remove('hidden');
                
                // Start AI progress animation
                simulateAiProgress(elements.metadataAiStatus, elements.metadataAiProcessing);
                
                try {
                    // Use multiple CORS proxies as fallback
                    const proxies = [
                        `https://api.allorigins.win/get?url=${encodeURIComponent(url)}`,
                        `https://cors-anywhere.herokuapp.com/${url}`,
                        `https://thingproxy.freeboard.io/fetch/${url}`
                    ];
                    
                    // Try each proxy until one works
                    let response;
                    for (const proxy of proxies) {
                        try {
                            response = await fetchWithTimeout(proxy, { timeout: 5000 });
                            if (response.ok) break;
                        } catch (e) {
                            console.log(`Proxy failed: ${proxy}`);
                        }
                    }
                    
                    if (!response || !response.ok) {
                        throw new Error('Failed to fetch the webpage. The site may be blocking our requests.');
                    }
                    
                    const data = await response.json();
                    const htmlContent = data.contents || data;
                    
                    // Extract metadata
                    const metadata = extractMetadataFromHtml(htmlContent);
                    
                    displayMetadataResults(metadata);
                } catch (error) {
                    console.error('Analysis Error:', error);
                    showToast('Analysis Failed', error.message || 'An unknown error occurred while analyzing the page.');
                } finally {
                    clearInterval(aiProgressInterval);
                    elements.metadataAiProcessing.classList.add('hidden');
                }
            }
            
            function extractMetadataFromHtml(html) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // Basic metadata
                const title = doc.querySelector('title')?.textContent || 'No title';
                const description = doc.querySelector('meta[name="description"]')?.getAttribute('content') || 'No description';
                const keywords = doc.querySelector('meta[name="keywords"]')?.getAttribute('content') || 'No keywords';
                const author = doc.querySelector('meta[name="author"]')?.getAttribute('content') || 'No author';
                
                // OpenGraph metadata
                const ogTitle = doc.querySelector('meta[property="og:title"]')?.getAttribute('content') || 'Not detected';
                const ogDescription = doc.querySelector('meta[property="og:description"]')?.getAttribute('content') || 'Not detected';
                const ogType = doc.querySelector('meta[property="og:type"]')?.getAttribute('content') || 'Not detected';
                const ogImage = doc.querySelector('meta[property="og:image"]')?.getAttribute('content') || 'Not detected';
                const ogUrl = doc.querySelector('meta[property="og:url"]')?.getAttribute('content') || 'Not detected';
                
                // Twitter Card metadata
                const twitterCard = doc.querySelector('meta[name="twitter:card"]')?.getAttribute('content') || 'Not detected';
                const twitterTitle = doc.querySelector('meta[name="twitter:title"]')?.getAttribute('content') || 'Not detected';
                const twitterDescription = doc.querySelector('meta[name="twitter:description"]')?.getAttribute('content') || 'Not detected';
                const twitterImage = doc.querySelector('meta[name="twitter:image"]')?.getAttribute('content') || 'Not detected';
                
                // Schema.org / JSON-LD
                const jsonLdScripts = Array.from(doc.querySelectorAll('script[type="application/ld+json"]'));
                const jsonLdDetected = jsonLdScripts.length > 0 ? `${jsonLdScripts.length} JSON-LD blocks found` : 'Not detected';
                
                // Schema types
                let schemaTypes = new Set();
                jsonLdScripts.forEach(script => {
                    try {
                        const data = JSON.parse(script.textContent);
                        if (data['@type']) {
                            if (Array.isArray(data['@type'])) {
                                data['@type'].forEach(type => schemaTypes.add(type));
                            } else {
                                schemaTypes.add(data['@type']);
                            }
                        }
                    } catch (e) {
                        console.error('Error parsing JSON-LD:', e);
                    }
                });
                
                // All metadata tags
                const allMetaTags = Array.from(doc.querySelectorAll('meta')).map(tag => {
                    return {
                        property: tag.getAttribute('property') || tag.getAttribute('name') || 'Unknown',
                        content: tag.getAttribute('content') || 'No content'
                    };
                });
                
                return {
                    basic: { title, description, keywords, author },
                    openGraph: { ogTitle, ogDescription, ogType, ogImage, ogUrl },
                    twitter: { twitterCard, twitterTitle, twitterDescription, twitterImage },
                    structuredData: {
                        jsonLdDetected,
                        schemaTypes: schemaTypes.size > 0 ? Array.from(schemaTypes).join(', ') : 'Not detected'
                    },
                    allMetaTags
                };
            }
            
            function displayMetadataResults(metadata) {
                elements.metadataEmptyState.classList.add('hidden');
                elements.metadataResultsSection.classList.remove('hidden');
                
                // Basic metadata
                elements.metaTitle.textContent = metadata.basic.title;
                elements.metaDescription.textContent = metadata.basic.description;
                elements.metaKeywords.textContent = metadata.basic.keywords;
                elements.metaAuthor.textContent = metadata.basic.author;
                
                // OpenGraph
                elements.ogTitle.textContent = metadata.openGraph.ogTitle;
                elements.ogDescription.textContent = metadata.openGraph.ogDescription;
                elements.ogType.textContent = metadata.openGraph.ogType;
                elements.ogImage.textContent = metadata.openGraph.ogImage;
                elements.ogUrl.textContent = metadata.openGraph.ogUrl;
                
                // Twitter
                elements.twitterCard.textContent = metadata.twitter.twitterCard;
                elements.twitterTitle.textContent = metadata.twitter.twitterTitle;
                elements.twitterDescription.textContent = metadata.twitter.twitterDescription;
                elements.twitterImage.textContent = metadata.twitter.twitterImage;
                
                // Structured Data
                elements.schemaTypes.textContent = metadata.structuredData.schemaTypes;
                elements.jsonLdDetected.textContent = metadata.structuredData.jsonLdDetected;
                
                // All metadata tags table
                elements.allMetadataTbody.innerHTML = '';
                metadata.allMetaTags.forEach(tag => {
                    const row = document.createElement('tr');
                    row.className = 'hover:bg-gray-50 dark:hover:bg-gray-800';
                    row.innerHTML = `
                        <td class="px-4 py-2 text-sm font-medium text-gray-900 dark:text-gray-200">${tag.property}</td>
                        <td class="px-4 py-2 text-sm text-gray-500 dark:text-gray-400 break-all">${tag.content}</td>
                    `;
                    elements.allMetadataTbody.appendChild(row);
                });
            }
            
            function extractMetadata() {
                analyzeMetadata();
            }
            
            function copyAllMetadata() {
                const metadataText = `
                    Basic Metadata:
                    Title: ${elements.metaTitle.textContent}
                    Description: ${elements.metaDescription.textContent}
                    Keywords: ${elements.metaKeywords.textContent}
                    Author: ${elements.metaAuthor.textContent}
                    
                    OpenGraph:
                    Title: ${elements.ogTitle.textContent}
                    Description: ${elements.ogDescription.textContent}
                    Type: ${elements.ogType.textContent}
                    Image: ${elements.ogImage.textContent}
                    URL: ${elements.ogUrl.textContent}
                    
                    Twitter Card:
                    Card Type: ${elements.twitterCard.textContent}
                    Title: ${elements.twitterTitle.textContent}
                    Description: ${elements.twitterDescription.textContent}
                    Image: ${elements.twitterImage.textContent}
                    
                    Structured Data:
                    Schema Types: ${elements.schemaTypes.textContent}
                    JSON-LD: ${elements.jsonLdDetected.textContent}
                `;
                
                navigator.clipboard.writeText(metadataText).then(() => {
                    showToast('Metadata copied to clipboard!', 'success');
                });
            }
            
            async function exportMetadata() {
                const metadata = {
                    basic: {
                        title: elements.metaTitle.textContent,
                        description: elements.metaDescription.textContent,
                        keywords: elements.metaKeywords.textContent,
                        author: elements.metaAuthor.textContent
                    },
                    openGraph: {
                        title: elements.ogTitle.textContent,
                        description: elements.ogDescription.textContent,
                        type: elements.ogType.textContent,
                        image: elements.ogImage.textContent,
                        url: elements.ogUrl.textContent
                    },
                    twitter: {
                        card: elements.twitterCard.textContent,
                        title: elements.twitterTitle.textContent,
                        description: elements.twitterDescription.textContent,
                        image: elements.twitterImage.textContent
                    },
                    structuredData: {
                        schemaTypes: elements.schemaTypes.textContent,
                        jsonLdDetected: elements.jsonLdDetected.textContent
                    },
                    date: new Date().toISOString(),
                    sourceUrl: elements.metadataUrlInput.value.trim()
                };
                
                const blob = new Blob([JSON.stringify(metadata, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `metadata-${new Date().getTime()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showToast('Metadata exported!', 'success');
            }
        });
    </script>
</body>
    </html>
